
class MyArray {
  length: i32;

  #new(len: i32, defaultVal: i32) {
    this.length = len;
  }

  get(index: i32): i32 {
    return 0;
  }

  set(index: i32, value: i32): void {
  }

  mapI32(fn: (item: i32, index: i32, array: MyArray) => i32): MyArray {
    let result = new MyArray(this.length, 0);
    for (var i = 0; i < this.length; i = i + 1) {
      result.set(i, fn(this.get(i), i, this));
    }
    return result;
  }
}

export let main = (): void => {
  let arr = new MyArray(3, 10);
  
  // 1. Full arguments
  arr.mapI32((x: i32, i: i32, a: MyArray) => x + i + a.length);
  
  // 2. Two arguments (drop array)
  arr.mapI32((x: i32, i: i32) => x + i);
  
  // 3. One argument (drop index, array)
  arr.mapI32((x: i32) => x * 2);
};
