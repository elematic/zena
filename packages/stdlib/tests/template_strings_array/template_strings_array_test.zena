// TemplateStringsArray stdlib tests using zena:test
import {suite, test, TestContext} from 'zena:test';
import {equal, isTrue, isFalse} from 'zena:assert';
import {TemplateStringsArray} from 'zena:template-strings-array';

export let tests = suite('TemplateStringsArray', (): void => {
  test('length property returns number of string parts', (ctx: TestContext): void => {
    let tag = (strings: TemplateStringsArray, values: FixedArray<i32>): i32 => {
      return strings.length;
    };
    equal(tag`hello world`, 1);
    equal(tag`a${1}b`, 2);
    equal(tag`${0}middle${1}`, 3);
  });

  test('indexed access returns string parts', (ctx: TestContext): void => {
    let tag = (strings: TemplateStringsArray, values: FixedArray<i32>): string => {
      return strings[0];
    };
    equal(tag`hello`, 'hello');
    equal(tag`prefix${1}`, 'prefix');
  });

  test('raw property returns raw strings', (ctx: TestContext): void => {
    let tag = (strings: TemplateStringsArray, values: FixedArray<i32>): string => {
      return strings.raw[0];
    };
    equal(tag`hello`, 'hello');
  });

  test('values array contains interpolated values', (ctx: TestContext): void => {
    let tag = (strings: TemplateStringsArray, values: FixedArray<i32>): i32 => {
      return values[0];
    };
    equal(tag`${42}`, 42);
    equal(tag`prefix${100}suffix`, 100);
  });

  test('multiple interpolations', (ctx: TestContext): void => {
    let tag = (strings: TemplateStringsArray, values: FixedArray<i32>): i32 => {
      return values[0] + values[1];
    };
    equal(tag`${10} + ${20} = 30`, 30);
  });
});
