// Test getEnvironment
//
// @requires: wasmtime

import {console} from 'zena:console-wasi';
import {getEnvironment, EnvVar} from 'zena:cli';

export let main = (): i32 => {
  console.log("Testing getEnvironment...");
  
  let envs = getEnvironment();
  console.log("Got environment variables");
  
  // Print first few env vars
  for (var i = 0; i < envs.length; i = i + 1) {
    let env = envs[i];
    console.log(env.name + "=" + env.value);
    if (i >= 4) {
      console.log("...(truncated)");
      i = envs.length;  // break
    }
  }
  
  return 0;
};
