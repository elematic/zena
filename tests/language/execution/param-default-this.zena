// @mode: run
// @result: 42

// Test that parameter defaults can reference `this` and class members

class Reader {
  #currentPos: i32;
  
  #new(pos: i32) {
    this.#currentPos = pos;
  }
  
  // Default parameter uses this.#currentPos
  read(start: i32 = this.#currentPos): i32 {
    return start;
  }
  
  // Public field in default
  size: i32;
  readFromSize(start: i32 = this.size): i32 {
    return start;
  }
}

export let main = (): i32 => {
  let reader = new Reader(42);
  // Should use default which evaluates to this.#currentPos (42)
  return reader.read();
};
